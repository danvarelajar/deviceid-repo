{"attributes":{"fieldAttrs":"{\"device_id\":{\"count\":4},\"client_request_uri\":{\"count\":1}}","fields":"[]","timeFieldName":"@timestamp","title":"bot.logs-*"},"coreMigrationVersion":"7.13.2","id":"4d1b9440-8da7-11eb-9a2b-7de272420af0","migrationVersion":{"index-pattern":"7.11.0"},"references":[],"type":"index-pattern","updated_at":"2021-07-28T07:24:58.544Z","version":"WzU0LDFd"}
{"attributes":{"fieldAttrs":"{}","fields":"[]","timeFieldName":"@timestamp","title":"http.logs-*"},"coreMigrationVersion":"7.13.2","id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","migrationVersion":{"index-pattern":"7.11.0"},"references":[],"type":"index-pattern","updated_at":"2021-07-28T07:24:58.544Z","version":"WzMyLDFd"}
{"attributes":{"description":null,"state":{"datasourceStates":{"indexpattern":{"layers":{"6008f2a0-c0d2-4101-829b-ed3e10135b7e":{"columnOrder":["2765f480-1446-445e-bb09-b4b81ddcba25","0dd606fe-697a-4bed-b61d-78928299dd07","b5ebd3a8-f813-433e-9735-d43cafacea1f"],"columns":{"0dd606fe-697a-4bed-b61d-78928299dd07":{"dataType":"string","isBucketed":true,"label":"Top values of anomalies.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"b5ebd3a8-f813-433e-9735-d43cafacea1f","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"anomalies.keyword"},"2765f480-1446-445e-bb09-b4b81ddcba25":{"dataType":"ip","isBucketed":true,"label":"Top values of xff_ip","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"b5ebd3a8-f813-433e-9735-d43cafacea1f","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"xff_ip"},"b5ebd3a8-f813-433e-9735-d43cafacea1f":{"dataType":"number","isBucketed":false,"label":"Count of records","operationType":"count","scale":"ratio","sourceField":"Records"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"layers":[{"categoryDisplay":"default","groups":["2765f480-1446-445e-bb09-b4b81ddcba25","0dd606fe-697a-4bed-b61d-78928299dd07"],"layerId":"6008f2a0-c0d2-4101-829b-ed3e10135b7e","legendDisplay":"default","metric":"b5ebd3a8-f813-433e-9735-d43cafacea1f","nestedLegend":true,"numberDisplay":"percent"}],"palette":{"name":"cool","type":"palette"},"shape":"pie"}},"title":"Bot anomalies to Source IP","visualizationType":"lnsPie"},"coreMigrationVersion":"7.13.2","id":"86b338b0-9230-11eb-80cb-7fab9119700d","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"4d1b9440-8da7-11eb-9a2b-7de272420af0","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"4d1b9440-8da7-11eb-9a2b-7de272420af0","name":"indexpattern-datasource-layer-6008f2a0-c0d2-4101-829b-ed3e10135b7e","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:24:58.544Z","version":"WzU1LDFd"}
{"attributes":{"description":null,"state":{"datasourceStates":{"indexpattern":{"layers":{"6008f2a0-c0d2-4101-829b-ed3e10135b7e":{"columnOrder":["2765f480-1446-445e-bb09-b4b81ddcba25","0dd606fe-697a-4bed-b61d-78928299dd07","b5ebd3a8-f813-433e-9735-d43cafacea1f"],"columns":{"0dd606fe-697a-4bed-b61d-78928299dd07":{"dataType":"string","isBucketed":true,"label":"Top values of class.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"b5ebd3a8-f813-433e-9735-d43cafacea1f","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"class.keyword"},"2765f480-1446-445e-bb09-b4b81ddcba25":{"dataType":"ip","isBucketed":true,"label":"Top values of xff_ip","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"b5ebd3a8-f813-433e-9735-d43cafacea1f","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"xff_ip"},"b5ebd3a8-f813-433e-9735-d43cafacea1f":{"dataType":"number","isBucketed":false,"label":"Count of records","operationType":"count","scale":"ratio","sourceField":"Records"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"layers":[{"categoryDisplay":"default","groups":["2765f480-1446-445e-bb09-b4b81ddcba25","0dd606fe-697a-4bed-b61d-78928299dd07"],"layerId":"6008f2a0-c0d2-4101-829b-ed3e10135b7e","legendDisplay":"default","metric":"b5ebd3a8-f813-433e-9735-d43cafacea1f","nestedLegend":false,"numberDisplay":"percent"}],"palette":{"name":"cool","type":"palette"},"shape":"pie"}},"title":"Bot Class to Source IP","visualizationType":"lnsPie"},"coreMigrationVersion":"7.13.2","id":"44077160-8da9-11eb-9a2b-7de272420af0","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"4d1b9440-8da7-11eb-9a2b-7de272420af0","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"4d1b9440-8da7-11eb-9a2b-7de272420af0","name":"indexpattern-datasource-layer-6008f2a0-c0d2-4101-829b-ed3e10135b7e","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:24:58.544Z","version":"WzU2LDFd"}
{"attributes":{"description":"","state":{"datasourceStates":{"indexpattern":{"layers":{"a13c707e-84e5-4773-84b9-2bb22e741e45":{"columnOrder":["f1430682-bfc7-444f-9ccf-d144ea956e9e","281b9d82-0e51-411e-9500-7b5b36d18761","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","77fbd877-0dc7-44b2-ba39-332c1aa5fd87"],"columns":{"281b9d82-0e51-411e-9500-7b5b36d18761":{"dataType":"string","isBucketed":true,"label":"Top values of deviceB.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"deviceB.keyword"},"77fbd877-0dc7-44b2-ba39-332c1aa5fd87":{"dataType":"number","isBucketed":false,"label":"Count of records","operationType":"count","scale":"ratio","sourceField":"Records"},"b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6":{"dataType":"string","isBucketed":true,"label":"Top values of uName.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":19},"scale":"ordinal","sourceField":"uName.keyword"},"f1430682-bfc7-444f-9ccf-d144ea956e9e":{"dataType":"ip","isBucketed":true,"label":"Top values of xff_ip","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"xff_ip"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"layers":[{"categoryDisplay":"default","groups":["281b9d82-0e51-411e-9500-7b5b36d18761","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","f1430682-bfc7-444f-9ccf-d144ea956e9e","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761"],"layerId":"a13c707e-84e5-4773-84b9-2bb22e741e45","legendDisplay":"default","metric":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","nestedLegend":false,"numberDisplay":"percent"}],"palette":{"name":"warm","type":"palette"},"shape":"pie"}},"title":"Username to Device ID B to Source IP","visualizationType":"lnsPie"},"coreMigrationVersion":"7.13.2","id":"2693d1d0-ae3a-11eb-a780-3d1ba04a766c","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-layer-a13c707e-84e5-4773-84b9-2bb22e741e45","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:24:58.544Z","version":"WzU5LDFd"}
{"attributes":{"description":null,"state":{"datasourceStates":{"indexpattern":{"layers":{"814896f9-1209-4673-85c3-3ab28a7bde2a":{"columnOrder":["9a0a3dee-5772-4ec0-a647-dcbd0fca50b1","ad25649a-8089-418a-9b2b-4653fa065fd1","de4267de-8ec7-445c-a806-71c8abd8ac12"],"columns":{"9a0a3dee-5772-4ec0-a647-dcbd0fca50b1":{"customLabel":true,"dataType":"string","isBucketed":true,"label":"Device ID Type A","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"de4267de-8ec7-445c-a806-71c8abd8ac12","type":"column"},"orderDirection":"desc","otherBucket":true,"size":3},"scale":"ordinal","sourceField":"deviceA.keyword"},"ad25649a-8089-418a-9b2b-4653fa065fd1":{"dataType":"string","isBucketed":true,"label":"Top values of xff_ip.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"de4267de-8ec7-445c-a806-71c8abd8ac12","type":"column"},"orderDirection":"desc","otherBucket":true,"size":5},"scale":"ordinal","sourceField":"xff_ip.keyword"},"de4267de-8ec7-445c-a806-71c8abd8ac12":{"customLabel":true,"dataType":"number","isBucketed":false,"label":"Source IP","operationType":"count","scale":"ratio","sourceField":"Records"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"fittingFunction":"None","gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"layers":[{"accessors":["de4267de-8ec7-445c-a806-71c8abd8ac12"],"layerId":"814896f9-1209-4673-85c3-3ab28a7bde2a","palette":{"name":"cool","type":"palette"},"position":"top","seriesType":"bar_stacked","showGridlines":false,"splitAccessor":"ad25649a-8089-418a-9b2b-4653fa065fd1","xAccessor":"9a0a3dee-5772-4ec0-a647-dcbd0fca50b1"}],"legend":{"isVisible":true,"position":"right"},"preferredSeriesType":"bar_stacked","tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"valueLabels":"hide"}},"title":"Source IP to Device ID Type A","visualizationType":"lnsXY"},"coreMigrationVersion":"7.13.2","id":"8ad67230-8d72-11eb-81c6-b34d3b3b9c76","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-layer-814896f9-1209-4673-85c3-3ab28a7bde2a","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:47:39.288Z","version":"WzM5OCwxXQ=="}
{"attributes":{"description":null,"state":{"datasourceStates":{"indexpattern":{"layers":{"814896f9-1209-4673-85c3-3ab28a7bde2a":{"columnOrder":["9a0a3dee-5772-4ec0-a647-dcbd0fca50b1","ad25649a-8089-418a-9b2b-4653fa065fd1","de4267de-8ec7-445c-a806-71c8abd8ac12"],"columns":{"9a0a3dee-5772-4ec0-a647-dcbd0fca50b1":{"customLabel":true,"dataType":"string","isBucketed":true,"label":"Device ID Type B","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"de4267de-8ec7-445c-a806-71c8abd8ac12","type":"column"},"orderDirection":"desc","otherBucket":true,"size":3},"scale":"ordinal","sourceField":"deviceB.keyword"},"ad25649a-8089-418a-9b2b-4653fa065fd1":{"dataType":"string","isBucketed":true,"label":"Top values of xff_ip.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"de4267de-8ec7-445c-a806-71c8abd8ac12","type":"column"},"orderDirection":"desc","otherBucket":true,"size":5},"scale":"ordinal","sourceField":"xff_ip.keyword"},"de4267de-8ec7-445c-a806-71c8abd8ac12":{"customLabel":true,"dataType":"number","isBucketed":false,"label":"Source IP","operationType":"count","scale":"ratio","sourceField":"Records"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"fittingFunction":"None","gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"layers":[{"accessors":["de4267de-8ec7-445c-a806-71c8abd8ac12"],"layerId":"814896f9-1209-4673-85c3-3ab28a7bde2a","palette":{"name":"cool","type":"palette"},"position":"top","seriesType":"bar_stacked","showGridlines":false,"splitAccessor":"ad25649a-8089-418a-9b2b-4653fa065fd1","xAccessor":"9a0a3dee-5772-4ec0-a647-dcbd0fca50b1"}],"legend":{"isVisible":true,"position":"right"},"preferredSeriesType":"bar_stacked","tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"valueLabels":"hide"}},"title":"Source IP to Device ID Type B","visualizationType":"lnsXY"},"coreMigrationVersion":"7.13.2","id":"11838700-8d73-11eb-81c6-b34d3b3b9c76","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-layer-814896f9-1209-4673-85c3-3ab28a7bde2a","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:48:14.523Z","version":"WzQzOSwxXQ=="}
{"attributes":{"description":null,"state":{"datasourceStates":{"indexpattern":{"layers":{"a13c707e-84e5-4773-84b9-2bb22e741e45":{"columnOrder":["281b9d82-0e51-411e-9500-7b5b36d18761","f1430682-bfc7-444f-9ccf-d144ea956e9e","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","77fbd877-0dc7-44b2-ba39-332c1aa5fd87"],"columns":{"281b9d82-0e51-411e-9500-7b5b36d18761":{"dataType":"string","isBucketed":true,"label":"Top values of deviceA.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"deviceA.keyword"},"77fbd877-0dc7-44b2-ba39-332c1aa5fd87":{"dataType":"number","isBucketed":false,"label":"Count of records","operationType":"count","scale":"ratio","sourceField":"Records"},"b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6":{"dataType":"string","isBucketed":true,"label":"Top values of uName.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"uName.keyword"},"f1430682-bfc7-444f-9ccf-d144ea956e9e":{"dataType":"string","isBucketed":true,"label":"Top values of xff_ip.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"xff_ip.keyword"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"layers":[{"categoryDisplay":"default","groups":["281b9d82-0e51-411e-9500-7b5b36d18761","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","f1430682-bfc7-444f-9ccf-d144ea956e9e","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","f1430682-bfc7-444f-9ccf-d144ea956e9e"],"layerId":"a13c707e-84e5-4773-84b9-2bb22e741e45","legendDisplay":"default","metric":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","nestedLegend":true,"numberDisplay":"percent"}],"palette":{"name":"warm","type":"palette"},"shape":"pie"}},"title":"Username to Source IP to Device ID A","visualizationType":"lnsPie"},"coreMigrationVersion":"7.13.2","id":"0269c050-8da4-11eb-9a2b-7de272420af0","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-layer-a13c707e-84e5-4773-84b9-2bb22e741e45","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:48:47.792Z","version":"WzQ2MiwxXQ=="}
{"attributes":{"description":null,"state":{"datasourceStates":{"indexpattern":{"layers":{"a13c707e-84e5-4773-84b9-2bb22e741e45":{"columnOrder":["281b9d82-0e51-411e-9500-7b5b36d18761","f1430682-bfc7-444f-9ccf-d144ea956e9e","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","77fbd877-0dc7-44b2-ba39-332c1aa5fd87"],"columns":{"281b9d82-0e51-411e-9500-7b5b36d18761":{"dataType":"string","isBucketed":true,"label":"Top values of deviceB.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"deviceB.keyword"},"77fbd877-0dc7-44b2-ba39-332c1aa5fd87":{"dataType":"number","isBucketed":false,"label":"Count of records","operationType":"count","scale":"ratio","sourceField":"Records"},"b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6":{"dataType":"string","isBucketed":true,"label":"Top values of uName.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"uName.keyword"},"f1430682-bfc7-444f-9ccf-d144ea956e9e":{"dataType":"string","isBucketed":true,"label":"Top values of xff_ip.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"xff_ip.keyword"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"layers":[{"categoryDisplay":"default","groups":["281b9d82-0e51-411e-9500-7b5b36d18761","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","f1430682-bfc7-444f-9ccf-d144ea956e9e","281b9d82-0e51-411e-9500-7b5b36d18761","f1430682-bfc7-444f-9ccf-d144ea956e9e"],"layerId":"a13c707e-84e5-4773-84b9-2bb22e741e45","legendDisplay":"default","metric":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","nestedLegend":true,"numberDisplay":"percent"}],"palette":{"name":"warm","type":"palette"},"shape":"pie"}},"title":"Username to Source IP to Device ID B","visualizationType":"lnsPie"},"coreMigrationVersion":"7.13.2","id":"ae7dae70-8da3-11eb-9a2b-7de272420af0","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-layer-a13c707e-84e5-4773-84b9-2bb22e741e45","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:49:26.392Z","version":"WzQ4NywxXQ=="}
{"attributes":{"description":null,"state":{"datasourceStates":{"indexpattern":{"layers":{"a13c707e-84e5-4773-84b9-2bb22e741e45":{"columnOrder":["f1430682-bfc7-444f-9ccf-d144ea956e9e","281b9d82-0e51-411e-9500-7b5b36d18761","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","77fbd877-0dc7-44b2-ba39-332c1aa5fd87"],"columns":{"281b9d82-0e51-411e-9500-7b5b36d18761":{"dataType":"string","isBucketed":true,"label":"Top values of deviceA.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"deviceA.keyword"},"77fbd877-0dc7-44b2-ba39-332c1aa5fd87":{"dataType":"number","isBucketed":false,"label":"Count of records","operationType":"count","scale":"ratio","sourceField":"Records"},"b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6":{"dataType":"string","isBucketed":true,"label":"Top values of uName.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":19},"scale":"ordinal","sourceField":"uName.keyword"},"f1430682-bfc7-444f-9ccf-d144ea956e9e":{"dataType":"string","isBucketed":true,"label":"Top values of xff_ip.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"xff_ip.keyword"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"layers":[{"categoryDisplay":"default","groups":["281b9d82-0e51-411e-9500-7b5b36d18761","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","f1430682-bfc7-444f-9ccf-d144ea956e9e","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","f1430682-bfc7-444f-9ccf-d144ea956e9e"],"layerId":"a13c707e-84e5-4773-84b9-2bb22e741e45","legendDisplay":"default","metric":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","nestedLegend":true,"numberDisplay":"percent"}],"palette":{"name":"warm","type":"palette"},"shape":"pie"}},"title":"Username to Device ID A to Source IP","visualizationType":"lnsPie"},"coreMigrationVersion":"7.13.2","id":"d4bde740-92c5-11eb-b296-0f227a1b9529","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-layer-a13c707e-84e5-4773-84b9-2bb22e741e45","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:50:55.749Z","version":"WzUzMywxXQ=="}
{"attributes":{"description":null,"state":{"datasourceStates":{"indexpattern":{"layers":{"a13c707e-84e5-4773-84b9-2bb22e741e45":{"columnOrder":["f1430682-bfc7-444f-9ccf-d144ea956e9e","281b9d82-0e51-411e-9500-7b5b36d18761","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","77fbd877-0dc7-44b2-ba39-332c1aa5fd87"],"columns":{"281b9d82-0e51-411e-9500-7b5b36d18761":{"dataType":"string","isBucketed":true,"label":"Top values of deviceB.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"deviceB.keyword"},"77fbd877-0dc7-44b2-ba39-332c1aa5fd87":{"dataType":"number","isBucketed":false,"label":"Count of records","operationType":"count","scale":"ratio","sourceField":"Records"},"b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6":{"dataType":"string","isBucketed":true,"label":"Top values of uName.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"uName.keyword"},"f1430682-bfc7-444f-9ccf-d144ea956e9e":{"dataType":"string","isBucketed":true,"label":"Top values of xff_ip.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","type":"column"},"orderDirection":"desc","otherBucket":true,"size":20},"scale":"ordinal","sourceField":"xff_ip.keyword"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"layers":[{"categoryDisplay":"default","groups":["281b9d82-0e51-411e-9500-7b5b36d18761","b2ea43c8-1103-47d0-acdd-5fbae2bf6aa6","f1430682-bfc7-444f-9ccf-d144ea956e9e","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","281b9d82-0e51-411e-9500-7b5b36d18761","f1430682-bfc7-444f-9ccf-d144ea956e9e"],"layerId":"a13c707e-84e5-4773-84b9-2bb22e741e45","legendDisplay":"show","legendPosition":"right","metric":"77fbd877-0dc7-44b2-ba39-332c1aa5fd87","nestedLegend":true,"numberDisplay":"percent"}],"palette":{"name":"warm","type":"palette"},"shape":"pie"}},"title":"Username to Device ID B to Source IP","visualizationType":"lnsPie"},"coreMigrationVersion":"7.13.2","id":"e339f110-92c5-11eb-b296-0f227a1b9529","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-layer-a13c707e-84e5-4773-84b9-2bb22e741e45","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:51:34.713Z","version":"WzU2OSwxXQ=="}
{"attributes":{"description":null,"state":{"datasourceStates":{"indexpattern":{"layers":{"814896f9-1209-4673-85c3-3ab28a7bde2a":{"columnOrder":["9a0a3dee-5772-4ec0-a647-dcbd0fca50b1","ad25649a-8089-418a-9b2b-4653fa065fd1","de4267de-8ec7-445c-a806-71c8abd8ac12"],"columns":{"9a0a3dee-5772-4ec0-a647-dcbd0fca50b1":{"customLabel":true,"dataType":"string","isBucketed":true,"label":"Device ID Type A","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"de4267de-8ec7-445c-a806-71c8abd8ac12","type":"column"},"orderDirection":"desc","otherBucket":true,"size":3},"scale":"ordinal","sourceField":"deviceA.keyword"},"ad25649a-8089-418a-9b2b-4653fa065fd1":{"dataType":"string","isBucketed":true,"label":"Top values of uName.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"de4267de-8ec7-445c-a806-71c8abd8ac12","type":"column"},"orderDirection":"desc","otherBucket":true,"size":5},"scale":"ordinal","sourceField":"uName.keyword"},"de4267de-8ec7-445c-a806-71c8abd8ac12":{"customLabel":true,"dataType":"number","isBucketed":false,"label":"Username","operationType":"count","scale":"ratio","sourceField":"Records"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"fittingFunction":"None","gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"layers":[{"accessors":["de4267de-8ec7-445c-a806-71c8abd8ac12"],"layerId":"814896f9-1209-4673-85c3-3ab28a7bde2a","palette":{"name":"cool","type":"palette"},"position":"top","seriesType":"bar_stacked","showGridlines":false,"splitAccessor":"ad25649a-8089-418a-9b2b-4653fa065fd1","xAccessor":"9a0a3dee-5772-4ec0-a647-dcbd0fca50b1"}],"legend":{"isVisible":true,"position":"right"},"preferredSeriesType":"bar_stacked","tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"valueLabels":"hide"}},"title":"Username to Device ID Type A","visualizationType":"lnsXY"},"coreMigrationVersion":"7.13.2","id":"83dbd5f0-8d73-11eb-81c6-b34d3b3b9c76","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-layer-814896f9-1209-4673-85c3-3ab28a7bde2a","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T07:59:18.564Z","version":"WzczNywxXQ=="}
{"attributes":{"description":"","state":{"datasourceStates":{"indexpattern":{"layers":{"814896f9-1209-4673-85c3-3ab28a7bde2a":{"columnOrder":["9a0a3dee-5772-4ec0-a647-dcbd0fca50b1","ad25649a-8089-418a-9b2b-4653fa065fd1","de4267de-8ec7-445c-a806-71c8abd8ac12"],"columns":{"9a0a3dee-5772-4ec0-a647-dcbd0fca50b1":{"customLabel":true,"dataType":"string","isBucketed":true,"label":"Device ID Type B","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"de4267de-8ec7-445c-a806-71c8abd8ac12","type":"column"},"orderDirection":"desc","otherBucket":true,"size":3},"scale":"ordinal","sourceField":"deviceB.keyword"},"ad25649a-8089-418a-9b2b-4653fa065fd1":{"dataType":"string","isBucketed":true,"label":"Top values of uName.keyword","operationType":"terms","params":{"missingBucket":false,"orderBy":{"columnId":"de4267de-8ec7-445c-a806-71c8abd8ac12","type":"column"},"orderDirection":"desc","otherBucket":true,"size":5},"scale":"ordinal","sourceField":"uName.keyword"},"de4267de-8ec7-445c-a806-71c8abd8ac12":{"customLabel":true,"dataType":"number","isBucketed":false,"label":"Username","operationType":"count","scale":"ratio","sourceField":"Records"}},"incompleteColumns":{}}}}},"filters":[],"query":{"language":"kuery","query":""},"visualization":{"axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"fittingFunction":"None","gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"layers":[{"accessors":["de4267de-8ec7-445c-a806-71c8abd8ac12"],"layerId":"814896f9-1209-4673-85c3-3ab28a7bde2a","palette":{"name":"cool","type":"palette"},"position":"top","seriesType":"bar_stacked","showGridlines":false,"splitAccessor":"ad25649a-8089-418a-9b2b-4653fa065fd1","xAccessor":"9a0a3dee-5772-4ec0-a647-dcbd0fca50b1"}],"legend":{"isVisible":true,"position":"right"},"preferredSeriesType":"bar_stacked","tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"valueLabels":"hide"}},"title":"Username to Device ID Type B","visualizationType":"lnsXY"},"coreMigrationVersion":"7.13.2","id":"9f70d720-8d73-11eb-81c6-b34d3b3b9c76","migrationVersion":{"lens":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"indexpattern-datasource-layer-814896f9-1209-4673-85c3-3ab28a7bde2a","type":"index-pattern"}],"type":"lens","updated_at":"2021-07-28T08:05:28.248Z","version":"Wzg2NSwxXQ=="}
{"attributes":{"description":"","layerListJSON":"[{\"sourceDescriptor\":{\"type\":\"EMS_TMS\",\"id\":\"road_map\",\"isAutoSelect\":false},\"id\":\"b4853817-18ed-4e50-8de0-ad8750fe1e9a\",\"label\":null,\"minZoom\":0,\"maxZoom\":9,\"alpha\":0.87,\"visible\":true,\"style\":{\"type\":\"TILE\"},\"type\":\"VECTOR_TILE\",\"areLabelsOnTop\":true}]","mapStateJSON":"{\"zoom\":3.17,\"center\":{\"lon\":9.82657,\"lat\":49.48943},\"timeFilters\":{\"from\":\"now-90m\",\"to\":\"now\"},\"refreshConfig\":{\"isPaused\":true,\"interval\":0},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[],\"settings\":{\"autoFitToDataBounds\":false,\"backgroundColor\":\"#ffffff\",\"disableInteractive\":false,\"disableTooltipControl\":false,\"hideToolbarOverlay\":false,\"hideLayerControl\":false,\"hideViewControl\":false,\"initialLocation\":\"LAST_SAVED_LOCATION\",\"fixedLocation\":{\"lat\":0,\"lon\":0,\"zoom\":2},\"browserLocation\":{\"zoom\":2},\"maxZoom\":24,\"minZoom\":0,\"showScaleControl\":false,\"showSpatialFilters\":true,\"spatialFiltersAlpa\":0.3,\"spatialFiltersFillColor\":\"#DA8B45\",\"spatialFiltersLineColor\":\"#DA8B45\"}}","title":"Worldmap","uiStateJSON":"{\"isLayerTOCOpen\":true,\"openTOCDetails\":[]}"},"coreMigrationVersion":"7.13.2","id":"2d7887b0-8d61-11eb-81c6-b34d3b3b9c76","migrationVersion":{"map":"7.12.0"},"references":[],"type":"map","updated_at":"2021-07-28T08:15:43.185Z","version":"Wzk1NiwxXQ=="}
{"attributes":{"description":"","filters":[],"query":{"language":"kuery","query":"geoip.city_name.keyword : * "},"title":"Geo City"},"coreMigrationVersion":"7.13.2","id":"Geo City","references":[],"type":"query","updated_at":"2021-07-28T07:24:58.544Z","version":"WzYwLDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Hot Device ID Type A","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Hot Device ID Type A\",\"type\":\"tagcloud\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"params\":{},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"deviceA.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":true,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Hot Device ID Type A\"},\"schema\":\"segment\"}],\"params\":{\"scale\":\"linear\",\"orientation\":\"single\",\"minFontSize\":10,\"maxFontSize\":30,\"showLabel\":true}}"},"coreMigrationVersion":"7.13.2","id":"fdd7bfa0-8da4-11eb-9a2b-7de272420af0","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzM5LDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Hot Device ID Type B","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Hot Device ID Type B\",\"type\":\"tagcloud\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"params\":{},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"deviceB.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":true,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Hot Device ID Type B\"},\"schema\":\"segment\"}],\"params\":{\"scale\":\"linear\",\"orientation\":\"single\",\"minFontSize\":10,\"maxFontSize\":30,\"showLabel\":true}}"},"coreMigrationVersion":"7.13.2","id":"1234c2e0-8da5-11eb-9a2b-7de272420af0","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzQxLDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Bot - Anomalies","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Bot - Anomalies\",\"type\":\"metrics\",\"aggs\":[],\"params\":{\"id\":\"61ca57f0-469d-11e7-af02-69e470af7417\",\"type\":\"timeseries\",\"series\":[{\"id\":\"61ca57f1-469d-11e7-af02-69e470af7417\",\"color\":\"#68BC00\",\"split_mode\":\"terms\",\"split_color_mode\":\"gradient\",\"metrics\":[{\"id\":\"61ca57f2-469d-11e7-af02-69e470af7417\",\"type\":\"count\"}],\"separate_axis\":0,\"axis_position\":\"right\",\"formatter\":\"number\",\"chart_type\":\"line\",\"line_width\":1,\"point_size\":1,\"fill\":0.5,\"stacked\":\"none\",\"terms_field\":\"anomalies.keyword\",\"override_index_pattern\":1,\"time_range_mode\":\"entire_time_range\"}],\"time_field\":\"@timestamp\",\"index_pattern\":\"bot.logs-*\",\"interval\":\"\",\"axis_position\":\"left\",\"axis_formatter\":\"number\",\"axis_scale\":\"normal\",\"show_legend\":1,\"show_grid\":1,\"tooltip_mode\":\"show_all\",\"isModelInvalid\":false,\"background_color_rules\":[{\"id\":\"7daf49d0-922f-11eb-b3ad-3969a9689f11\"}],\"bar_color_rules\":[{\"id\":\"7ebd5e70-922f-11eb-b3ad-3969a9689f11\"}],\"gauge_color_rules\":[{\"id\":\"8077b8a0-922f-11eb-b3ad-3969a9689f11\"}],\"gauge_width\":10,\"gauge_inner_width\":10,\"gauge_style\":\"half\",\"pivot_id\":\"actual_mitigation_action.keyword\",\"pivot_type\":\"string\",\"use_kibana_indexes\":false}}"},"coreMigrationVersion":"7.13.2","id":"21379b70-9230-11eb-80cb-7fab9119700d","migrationVersion":{"visualization":"7.13.1"},"references":[],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzUyLDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Bot - Mitigation Action Reason","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Bot - Mitigation Action Reason\",\"type\":\"metrics\",\"aggs\":[],\"params\":{\"id\":\"61ca57f0-469d-11e7-af02-69e470af7417\",\"type\":\"timeseries\",\"series\":[{\"id\":\"61ca57f1-469d-11e7-af02-69e470af7417\",\"color\":\"#68BC00\",\"split_mode\":\"terms\",\"split_color_mode\":\"gradient\",\"metrics\":[{\"id\":\"61ca57f2-469d-11e7-af02-69e470af7417\",\"type\":\"count\"}],\"separate_axis\":0,\"axis_position\":\"right\",\"formatter\":\"number\",\"chart_type\":\"line\",\"line_width\":1,\"point_size\":1,\"fill\":0.5,\"stacked\":\"none\",\"terms_field\":\"configured_mitigation_action_reason.keyword\",\"override_index_pattern\":1,\"time_range_mode\":\"entire_time_range\"}],\"time_field\":\"@timestamp\",\"index_pattern\":\"bot.logs-*\",\"interval\":\"\",\"axis_position\":\"left\",\"axis_formatter\":\"number\",\"axis_scale\":\"normal\",\"show_legend\":1,\"show_grid\":1,\"tooltip_mode\":\"show_all\",\"isModelInvalid\":false,\"background_color_rules\":[{\"id\":\"7daf49d0-922f-11eb-b3ad-3969a9689f11\"}],\"bar_color_rules\":[{\"id\":\"7ebd5e70-922f-11eb-b3ad-3969a9689f11\"}],\"gauge_color_rules\":[{\"id\":\"8077b8a0-922f-11eb-b3ad-3969a9689f11\"}],\"gauge_width\":10,\"gauge_inner_width\":10,\"gauge_style\":\"half\",\"pivot_id\":\"actual_mitigation_action.keyword\",\"pivot_type\":\"string\",\"use_kibana_indexes\":false}}"},"coreMigrationVersion":"7.13.2","id":"c5b2ce00-922f-11eb-80cb-7fab9119700d","migrationVersion":{"visualization":"7.13.1"},"references":[],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzUzLDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Unique Device ID Type A and B","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Unique Device ID Type A and B\",\"type\":\"gauge\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"cardinality\",\"params\":{\"field\":\"deviceA.keyword\",\"customLabel\":\" ID Type A\"},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"cardinality\",\"params\":{\"field\":\"deviceB.keyword\",\"customLabel\":\"ID Type B\"},\"schema\":\"metric\"}],\"params\":{\"type\":\"gauge\",\"addTooltip\":true,\"addLegend\":true,\"isDisplayWarning\":false,\"gauge\":{\"alignment\":\"automatic\",\"extendRange\":true,\"percentageMode\":false,\"gaugeType\":\"Arc\",\"gaugeStyle\":\"Full\",\"backStyle\":\"Full\",\"orientation\":\"vertical\",\"colorSchema\":\"Blues\",\"gaugeColorMode\":\"Labels\",\"colorsRange\":[{\"from\":0,\"to\":50},{\"from\":50,\"to\":75},{\"from\":75,\"to\":100}],\"invertColors\":false,\"labels\":{\"show\":true,\"color\":\"black\"},\"scale\":{\"show\":true,\"labels\":false,\"color\":\"rgba(105,112,125,0.2)\"},\"type\":\"meter\",\"style\":{\"bgWidth\":0.9,\"width\":0.9,\"mask\":false,\"bgMask\":false,\"maskBars\":50,\"bgFill\":\"rgba(105,112,125,0.2)\",\"bgColor\":true,\"subText\":\"\",\"fontSize\":60}}}}"},"coreMigrationVersion":"7.13.2","id":"cbda8a10-8d71-11eb-81c6-b34d3b3b9c76","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzYxLDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"TOP URLs","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"TOP URLs\",\"type\":\"pie\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"params\":{\"customLabel\":\"Top Requested URLs\"},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"client_request_uri.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":10,\"otherBucket\":true,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\"},\"schema\":\"segment\"}],\"params\":{\"type\":\"pie\",\"addTooltip\":true,\"addLegend\":true,\"legendPosition\":\"right\",\"isDonut\":true,\"labels\":{\"show\":true,\"values\":true,\"last_level\":true,\"truncate\":100}}}"},"coreMigrationVersion":"7.13.2","id":"b7f3f300-ae65-11eb-a780-3d1ba04a766c","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"4d1b9440-8da7-11eb-9a2b-7de272420af0","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzYyLDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Table Top 10 Device IDs Type A","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Table Top 10 Device IDs Type A\",\"type\":\"table\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"params\":{\"customLabel\":\"\"},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"deviceA.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":10,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Device ID Type A\"},\"schema\":\"bucket\"}],\"params\":{\"perPage\":10,\"showPartialRows\":false,\"showMetricsAtAllLevels\":false,\"showTotal\":false,\"showToolbar\":false,\"totalFunc\":\"sum\",\"percentageCol\":\"\"}}"},"coreMigrationVersion":"7.13.2","id":"8b89f1f0-ae67-11eb-a780-3d1ba04a766c","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzMzLDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Table Top 10 Device IDs Type B","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Table Top 10 Device IDs Type B\",\"type\":\"table\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"params\":{\"customLabel\":\"\"},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"deviceB.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":10,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Device ID Type B\"},\"schema\":\"bucket\"}],\"params\":{\"perPage\":10,\"showPartialRows\":false,\"showMetricsAtAllLevels\":false,\"showTotal\":false,\"showToolbar\":false,\"totalFunc\":\"sum\",\"percentageCol\":\"\"}}"},"coreMigrationVersion":"7.13.2","id":"958c0c60-ae67-11eb-a780-3d1ba04a766c","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzM0LDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Table Top 10 Countries","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Table Top 10 Countries\",\"type\":\"table\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"params\":{\"customLabel\":\"\"},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"geoip.country_name.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":10,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Client IP Address\"},\"schema\":\"bucket\"}],\"params\":{\"perPage\":10,\"showPartialRows\":false,\"showMetricsAtAllLevels\":false,\"showTotal\":false,\"showToolbar\":false,\"totalFunc\":\"sum\",\"percentageCol\":\"\"}}"},"coreMigrationVersion":"7.13.2","id":"aba45430-ae67-11eb-a780-3d1ba04a766c","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzM1LDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Table Top 10 Username","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Table Top 10 Username\",\"type\":\"table\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"params\":{\"customLabel\":\"\"},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"uName.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":10,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Top 10 User Name\"},\"schema\":\"bucket\"}],\"params\":{\"perPage\":10,\"showPartialRows\":false,\"showMetricsAtAllLevels\":false,\"showTotal\":false,\"showToolbar\":false,\"totalFunc\":\"sum\",\"percentageCol\":\"\"}}"},"coreMigrationVersion":"7.13.2","id":"c7584e10-ae72-11eb-a780-3d1ba04a766c","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:24:58.544Z","version":"WzM3LDFd"}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Aggregated Table View DID_A ","uiStateJSON":"{\"vis\":{\"params\":{\"colWidth\":[{\"colIndex\":0,\"width\":335.3199951171875}]}}}","version":1,"visState":"{\"title\":\"Aggregated Table View DID_A \",\"type\":\"table\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"cardinality\",\"params\":{\"field\":\"deviceA.keyword\",\"customLabel\":\"Count\"},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"deviceA.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Device ID Type A\"},\"schema\":\"bucket\"},{\"id\":\"3\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"uName.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Username\"},\"schema\":\"bucket\"},{\"id\":\"4\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"xff_ip.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Client IP\"},\"schema\":\"bucket\"},{\"id\":\"5\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"geoip.country_name.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Geo Location\"},\"schema\":\"bucket\"}],\"params\":{\"perPage\":10,\"showPartialRows\":false,\"showMetricsAtAllLevels\":false,\"showTotal\":false,\"showToolbar\":false,\"totalFunc\":\"sum\",\"percentageCol\":\"\"}}"},"coreMigrationVersion":"7.13.2","id":"51ce3620-ad80-11eb-907b-79e0f2e5ce74","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:42:16.751Z","version":"WzIzNiwxXQ=="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Aggregated Table View DID_B","uiStateJSON":"{\"vis\":{\"params\":{\"colWidth\":[{\"colIndex\":0,\"width\":335.3199951171875}]}}}","version":1,"visState":"{\"title\":\"Aggregated Table View DID_B\",\"type\":\"table\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"cardinality\",\"params\":{\"field\":\"deviceB.keyword\",\"customLabel\":\"Count\"},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"deviceB.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Device ID Type B\"},\"schema\":\"bucket\"},{\"id\":\"3\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"uName.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Username\"},\"schema\":\"bucket\"},{\"id\":\"4\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"xff_ip.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Client IP\"},\"schema\":\"bucket\"},{\"id\":\"5\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"geoip.country_name.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":5,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Geo Location\"},\"schema\":\"bucket\"}],\"params\":{\"perPage\":10,\"showPartialRows\":false,\"showMetricsAtAllLevels\":false,\"showTotal\":false,\"showToolbar\":false,\"totalFunc\":\"sum\",\"percentageCol\":\"\"}}"},"coreMigrationVersion":"7.13.2","id":"6dd11450-ad80-11eb-907b-79e0f2e5ce74","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:42:40.818Z","version":"WzI1NSwxXQ=="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"title":"Vega - Geo IP to Device ID Type A","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Vega - Geo IP to Device ID Type A\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\r\\n  $schema: https://vega.github.io/schema/vega/v3.0.json\\r\\n  data: [\\r\\n    {\\r\\n      // query ES based on the currently selected time range and filter string\\r\\n      name: rawData\\r\\n      url: {\\r\\n        %context%: true\\r\\n        %timefield%: @timestamp\\r\\n        index: http.logs-*\\r\\n        body: {\\r\\n          size: 0\\r\\n          aggs: {\\r\\n            table: {\\r\\n              composite: {\\r\\n                size: 10000\\r\\n                sources: [\\r\\n                  {\\r\\n                    stk1: {\\r\\n                      terms: {field: \\\"xff_ip.keyword\\\"}\\r\\n                    }\\r\\n                  }\\r\\n                  {\\r\\n                    stk2: {\\r\\n                      terms: {field: \\\"deviceA.keyword\\\"}\\r\\n                    }\\r\\n                  }\\r\\n                ]\\r\\n              }\\r\\n            }\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n      // From the result, take just the data we are interested in\\r\\n      format: {property: \\\"aggregations.table.buckets\\\"}\\r\\n      // Convert key.stk1 -> stk1 for simpler access below\\r\\n      transform: [\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.key.stk1\\\", as: \\\"stk1\\\"}\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.key.stk2\\\", as: \\\"stk2\\\"}\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.doc_count\\\", as: \\\"size\\\"}\\r\\n      ]\\r\\n    }\\r\\n    {\\r\\n      name: nodes\\r\\n      source: rawData\\r\\n      transform: [\\r\\n        // when a country is selected, filter out unrelated data\\r\\n        {\\r\\n          type: filter\\r\\n          expr: !groupSelector || groupSelector.stk1 == datum.stk1 || groupSelector.stk2 == datum.stk2\\r\\n        }\\r\\n        // Set new key for later lookups - identifies each node\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.stk1+datum.stk2\\\", as: \\\"key\\\"}\\r\\n        // instead of each table row, create two new rows,\\r\\n        // one for the source (stack=stk1) and one for destination node (stack=stk2).\\r\\n        // The country code stored in stk1 and stk2 fields is placed into grpId field.\\r\\n        {\\r\\n          type: fold\\r\\n          fields: [\\\"stk1\\\", \\\"stk2\\\"]\\r\\n          as: [\\\"stack\\\", \\\"grpId\\\"]\\r\\n        }\\r\\n        // Create a sortkey, different for stk1 and stk2 stacks.\\r\\n        // Space separator ensures proper sort order in some corner cases.\\r\\n        {\\r\\n          type: formula\\r\\n          expr: datum.stack == 'stk1' ? datum.stk1+' '+datum.stk2 : datum.stk2+' '+datum.stk1\\r\\n          as: sortField\\r\\n        }\\r\\n        // Calculate y0 and y1 positions for stacking nodes one on top of the other,\\r\\n        // independently for each stack, and ensuring they are in the proper order,\\r\\n        // alphabetical from the top (reversed on the y axis)\\r\\n        {\\r\\n          type: stack\\r\\n          groupby: [\\\"stack\\\"]\\r\\n          sort: {field: \\\"sortField\\\", order: \\\"descending\\\"}\\r\\n          field: size\\r\\n        }\\r\\n        // calculate vertical center point for each node, used to draw edges\\r\\n        {type: \\\"formula\\\", expr: \\\"(datum.y0+datum.y1)/2\\\", as: \\\"yc\\\"}\\r\\n      ]\\r\\n    }\\r\\n    {\\r\\n      name: groups\\r\\n      source: nodes\\r\\n      transform: [\\r\\n        // combine all nodes into country groups, summing up the doc counts\\r\\n        {\\r\\n          type: aggregate\\r\\n          groupby: [\\\"stack\\\", \\\"grpId\\\"]\\r\\n          fields: [\\\"size\\\"]\\r\\n          ops: [\\\"sum\\\"]\\r\\n          as: [\\\"total\\\"]\\r\\n        }\\r\\n        // re-calculate the stacking y0,y1 values\\r\\n        {\\r\\n          type: stack\\r\\n          groupby: [\\\"stack\\\"]\\r\\n          sort: {field: \\\"grpId\\\", order: \\\"descending\\\"}\\r\\n          field: total\\r\\n        }\\r\\n        // project y0 and y1 values to screen coordinates\\r\\n        // doing it once here instead of doing it several times in marks\\r\\n        {type: \\\"formula\\\", expr: \\\"scale('y', datum.y0)\\\", as: \\\"scaledY0\\\"}\\r\\n        {type: \\\"formula\\\", expr: \\\"scale('y', datum.y1)\\\", as: \\\"scaledY1\\\"}\\r\\n        // boolean flag if the label should be on the right of the stack\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.stack == 'stk1'\\\", as: \\\"rightLabel\\\"}\\r\\n        // Calculate traffic percentage for this country using \\\"y\\\" scale\\r\\n        // domain upper bound, which represents the total traffic\\r\\n        {\\r\\n          type: formula\\r\\n          expr: datum.total/domain('y')[1]\\r\\n          as: percentage\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n    {\\r\\n      // This is a temp lookup table with all the 'stk2' stack nodes\\r\\n      name: destinationNodes\\r\\n      source: nodes\\r\\n      transform: [\\r\\n        {type: \\\"filter\\\", expr: \\\"datum.stack == 'stk2'\\\"}\\r\\n      ]\\r\\n    }\\r\\n    {\\r\\n      name: edges\\r\\n      source: nodes\\r\\n      transform: [\\r\\n        // we only want nodes from the left stack\\r\\n        {type: \\\"filter\\\", expr: \\\"datum.stack == 'stk1'\\\"}\\r\\n        // find corresponding node from the right stack, keep it as \\\"target\\\"\\r\\n        {\\r\\n          type: lookup\\r\\n          from: destinationNodes\\r\\n          key: key\\r\\n          fields: [\\\"key\\\"]\\r\\n          as: [\\\"target\\\"]\\r\\n        }\\r\\n        // calculate SVG link path between stk1 and stk2 stacks for the node pair\\r\\n        {\\r\\n          type: linkpath\\r\\n          orient: horizontal\\r\\n          shape: diagonal\\r\\n          sourceY: {expr: \\\"scale('y', datum.yc)\\\"}\\r\\n          sourceX: {expr: \\\"scale('x', 'stk1') + bandwidth('x')\\\"}\\r\\n          targetY: {expr: \\\"scale('y', datum.target.yc)\\\"}\\r\\n          targetX: {expr: \\\"scale('x', 'stk2')\\\"}\\r\\n        }\\r\\n        // A little trick to calculate the thickness of the line.\\r\\n        // The value needs to be the same as the hight of the node, but scaling\\r\\n        // size to screen's height gives inversed value because screen's Y\\r\\n        // coordinate goes from the top to the bottom, whereas the graph's Y=0\\r\\n        // is at the bottom. So subtracting scaled doc count from screen height\\r\\n        // (which is the \\\"lower\\\" bound of the \\\"y\\\" scale) gives us the right value\\r\\n        {\\r\\n          type: formula\\r\\n          expr: range('y')[0]-scale('y', datum.size)\\r\\n          as: strokeWidth\\r\\n        }\\r\\n        // Tooltip needs individual link's percentage of all traffic\\r\\n        {\\r\\n          type: formula\\r\\n          expr: datum.size/domain('y')[1]\\r\\n          as: percentage\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ]\\r\\n  scales: [\\r\\n    {\\r\\n      // calculates horizontal stack positioning\\r\\n      name: x\\r\\n      type: band\\r\\n      range: width\\r\\n      domain: [\\\"stk1\\\", \\\"stk2\\\"]\\r\\n      paddingOuter: 0.05\\r\\n      paddingInner: 0.95\\r\\n    }\\r\\n    {\\r\\n      // this scale goes up as high as the highest y1 value of all nodes\\r\\n      name: y\\r\\n      type: linear\\r\\n      range: height\\r\\n      domain: {data: \\\"nodes\\\", field: \\\"y1\\\"}\\r\\n    }\\r\\n    {\\r\\n      // use rawData to ensure the colors stay the same when clicking.\\r\\n      name: color\\r\\n      type: ordinal\\r\\n      range: category\\r\\n      domain: {data: \\\"rawData\\\", fields: [\\\"stk1\\\", \\\"stk2\\\"]}\\r\\n    }\\r\\n    {\\r\\n      // this scale is used to map internal ids (stk1, stk2) to stack names\\r\\n      name: stackNames\\r\\n      type: ordinal\\r\\n      range: [\\\"Source\\\", \\\"Destination\\\"]\\r\\n      domain: [\\\"stk1\\\", \\\"stk2\\\"]\\r\\n    }\\r\\n  ]\\r\\n  axes: [\\r\\n    {\\r\\n      // x axis should use custom label formatting to print proper stack names\\r\\n      orient: bottom\\r\\n      scale: x\\r\\n      encode: {\\r\\n        labels: {\\r\\n          update: {\\r\\n            text: {scale: \\\"stackNames\\\", field: \\\"value\\\"}\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n    {orient: \\\"left\\\", scale: \\\"y\\\"}\\r\\n  ]\\r\\n  marks: [\\r\\n    {\\r\\n      // draw the connecting line between stacks\\r\\n      type: path\\r\\n      name: edgeMark\\r\\n      from: {data: \\\"edges\\\"}\\r\\n      // this prevents some autosizing issues with large strokeWidth for paths\\r\\n      clip: true\\r\\n      encode: {\\r\\n        update: {\\r\\n          // By default use color of the left node, except when showing traffic\\r\\n          // from just one country, in which case use destination color.\\r\\n          stroke: [\\r\\n            {\\r\\n              test: groupSelector && groupSelector.stack=='stk1'\\r\\n              scale: color\\r\\n              field: stk2\\r\\n            }\\r\\n            {scale: \\\"color\\\", field: \\\"stk1\\\"}\\r\\n          ]\\r\\n          strokeWidth: {field: \\\"strokeWidth\\\"}\\r\\n          path: {field: \\\"path\\\"}\\r\\n          // when showing all traffic, and hovering over a country,\\r\\n          // highlight the traffic from that country.\\r\\n          strokeOpacity: {\\r\\n            signal: !groupSelector && (groupHover.stk1 == datum.stk1 || groupHover.stk2 == datum.stk2) ? 0.9 : 0.3\\r\\n          }\\r\\n          // Ensure that the hover-selected edges show on top\\r\\n          zindex: {\\r\\n            signal: !groupSelector && (groupHover.stk1 == datum.stk1 || groupHover.stk2 == datum.stk2) ? 1 : 0\\r\\n          }\\r\\n          // format tooltip string\\r\\n          tooltip: {\\r\\n            signal: datum.stk1 + ' → ' + datum.stk2 + '    ' + format(datum.size, ',.0f') + '   (' + format(datum.percentage, '.1%') + ')'\\r\\n          }\\r\\n        }\\r\\n        // Simple mouseover highlighting of a single line\\r\\n        hover: {\\r\\n          strokeOpacity: {value: 1}\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n    {\\r\\n      // draw stack groups (countries)\\r\\n      type: rect\\r\\n      name: groupMark\\r\\n      from: {data: \\\"groups\\\"}\\r\\n      encode: {\\r\\n        enter: {\\r\\n          fill: {scale: \\\"color\\\", field: \\\"grpId\\\"}\\r\\n          width: {scale: \\\"x\\\", band: 1}\\r\\n        }\\r\\n        update: {\\r\\n          x: {scale: \\\"x\\\", field: \\\"stack\\\"}\\r\\n          y: {field: \\\"scaledY0\\\"}\\r\\n          y2: {field: \\\"scaledY1\\\"}\\r\\n          fillOpacity: {value: 0.6}\\r\\n          tooltip: {\\r\\n            signal: datum.grpId + '   ' + format(datum.total, ',.0f') + '   (' + format(datum.percentage, '.1%') + ')'\\r\\n          }\\r\\n        }\\r\\n        hover: {\\r\\n          fillOpacity: {value: 1}\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n    {\\r\\n      // draw country code labels on the inner side of the stack\\r\\n      type: text\\r\\n      from: {data: \\\"groups\\\"}\\r\\n      // don't process events for the labels - otherwise line mouseover is unclean\\r\\n      interactive: false\\r\\n      encode: {\\r\\n        update: {\\r\\n          // depending on which stack it is, position x with some padding\\r\\n          x: {\\r\\n            signal: scale('x', datum.stack) + (datum.rightLabel ? bandwidth('x') + 8 : -8)\\r\\n          }\\r\\n          // middle of the group\\r\\n          yc: {signal: \\\"(datum.scaledY0 + datum.scaledY1)/2\\\"}\\r\\n          align: {signal: \\\"datum.rightLabel ? 'left' : 'right'\\\"}\\r\\n          baseline: {value: \\\"middle\\\"}\\r\\n          fontWeight: {value: \\\"bold\\\"}\\r\\n          // only show text label if the group's height is large enough\\r\\n          text: {signal: \\\"abs(datum.scaledY0-datum.scaledY1) > 13 ? datum.grpId : ''\\\"}\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n    {\\r\\n      // Create a \\\"show all\\\" button. Shown only when a country is selected.\\r\\n      type: group\\r\\n      data: [\\r\\n        // We need to make the button show only when groupSelector signal is true.\\r\\n        // Each mark is drawn as many times as there are elements in the backing data.\\r\\n        // Which means that if values list is empty, it will not be drawn.\\r\\n        // Here I create a data source with one empty object, and filter that list\\r\\n        // based on the signal value. This can only be done in a group.\\r\\n        {\\r\\n          name: dataForShowAll\\r\\n          values: [{}]\\r\\n          transform: [{type: \\\"filter\\\", expr: \\\"groupSelector\\\"}]\\r\\n        }\\r\\n      ]\\r\\n      // Set button size and positioning\\r\\n      encode: {\\r\\n        enter: {\\r\\n          xc: {signal: \\\"width/2\\\"}\\r\\n          y: {value: 30}\\r\\n          width: {value: 80}\\r\\n          height: {value: 30}\\r\\n        }\\r\\n      }\\r\\n      marks: [\\r\\n        {\\r\\n          // This group is shown as a button with rounded corners.\\r\\n          type: group\\r\\n          // mark name allows signal capturing\\r\\n          name: groupReset\\r\\n          // Only shows button if dataForShowAll has values.\\r\\n          from: {data: \\\"dataForShowAll\\\"}\\r\\n          encode: {\\r\\n            enter: {\\r\\n              cornerRadius: {value: 6}\\r\\n              fill: {value: \\\"#f5f5f5\\\"}\\r\\n              stroke: {value: \\\"#c1c1c1\\\"}\\r\\n              strokeWidth: {value: 2}\\r\\n              // use parent group's size\\r\\n              height: {\\r\\n                field: {group: \\\"height\\\"}\\r\\n              }\\r\\n              width: {\\r\\n                field: {group: \\\"width\\\"}\\r\\n              }\\r\\n            }\\r\\n            update: {\\r\\n              // groups are transparent by default\\r\\n              opacity: {value: 1}\\r\\n            }\\r\\n            hover: {\\r\\n              opacity: {value: 0.7}\\r\\n            }\\r\\n          }\\r\\n          marks: [\\r\\n            {\\r\\n              type: text\\r\\n              // if true, it will prevent clicking on the button when over text.\\r\\n              interactive: false\\r\\n              encode: {\\r\\n                enter: {\\r\\n                  // center text in the paren group\\r\\n                  xc: {\\r\\n                    field: {group: \\\"width\\\"}\\r\\n                    mult: 0.5\\r\\n                  }\\r\\n                  yc: {\\r\\n                    field: {group: \\\"height\\\"}\\r\\n                    mult: 0.5\\r\\n                    offset: 2\\r\\n                  }\\r\\n                  align: {value: \\\"center\\\"}\\r\\n                  baseline: {value: \\\"middle\\\"}\\r\\n                  fontWeight: {value: \\\"bold\\\"}\\r\\n                  text: {value: \\\"Show All\\\"}\\r\\n                }\\r\\n              }\\r\\n            }\\r\\n          ]\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ]\\r\\n  signals: [\\r\\n    {\\r\\n      // used to highlight traffic to/from the same country\\r\\n      name: groupHover\\r\\n      value: {}\\r\\n      on: [\\r\\n        {\\r\\n          events: @groupMark:mouseover\\r\\n          update: \\\"{stk1:datum.stack=='stk1' && datum.grpId, stk2:datum.stack=='stk2' && datum.grpId}\\\"\\r\\n        }\\r\\n        {events: \\\"mouseout\\\", update: \\\"{}\\\"}\\r\\n      ]\\r\\n    }\\r\\n    // used to filter only the data related to the selected country\\r\\n    {\\r\\n      name: groupSelector\\r\\n      value: false\\r\\n      on: [\\r\\n        {\\r\\n          // Clicking groupMark sets this signal to the filter values\\r\\n          events: @groupMark:click!\\r\\n          update: \\\"{stack:datum.stack, stk1:datum.stack=='stk1' && datum.grpId, stk2:datum.stack=='stk2' && datum.grpId}\\\"\\r\\n        }\\r\\n        {\\r\\n          // Clicking \\\"show all\\\" button, or double-clicking anywhere resets it\\r\\n          events: [\\r\\n            {type: \\\"click\\\", markname: \\\"groupReset\\\"}\\r\\n            {type: \\\"dblclick\\\"}\\r\\n          ]\\r\\n          update: \\\"false\\\"\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ]\\r\\n}\"}}"},"coreMigrationVersion":"7.13.2","id":"3dccdf80-9239-11eb-a310-d38178f3b2d9","migrationVersion":{"visualization":"7.13.1"},"references":[],"type":"visualization","updated_at":"2021-07-28T07:44:15.797Z","version":"WzI4OCwxXQ=="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[],\"indexRefName\":\"kibanaSavedObjectMeta.searchSourceJSON.index\"}"},"title":"Table Top 10 Client IPs","uiStateJSON":"{\"vis\":{\"params\":{\"colWidth\":[{\"colIndex\":0,\"width\":213.79998779296875},{\"colIndex\":1,\"width\":154.79998779296875}]}}}","version":1,"visState":"{\"title\":\"Table Top 10 Client IPs\",\"type\":\"table\",\"aggs\":[{\"id\":\"1\",\"enabled\":true,\"type\":\"count\",\"params\":{\"customLabel\":\"\"},\"schema\":\"metric\"},{\"id\":\"2\",\"enabled\":true,\"type\":\"terms\",\"params\":{\"field\":\"xff_ip.keyword\",\"orderBy\":\"1\",\"order\":\"desc\",\"size\":10,\"otherBucket\":false,\"otherBucketLabel\":\"Other\",\"missingBucket\":false,\"missingBucketLabel\":\"Missing\",\"customLabel\":\"Client IP Address\"},\"schema\":\"bucket\"}],\"params\":{\"perPage\":10,\"showPartialRows\":false,\"showMetricsAtAllLevels\":false,\"showTotal\":false,\"showToolbar\":false,\"totalFunc\":\"sum\",\"percentageCol\":\"\"}}"},"coreMigrationVersion":"7.13.2","id":"72075600-ae67-11eb-a780-3d1ba04a766c","migrationVersion":{"visualization":"7.13.1"},"references":[{"id":"17a98da0-8d50-11eb-81c6-b34d3b3b9c76","name":"kibanaSavedObjectMeta.searchSourceJSON.index","type":"index-pattern"}],"type":"visualization","updated_at":"2021-07-28T07:45:31.305Z","version":"WzMyNiwxXQ=="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"title":"Vega - Geo IP to Device ID Type B","uiStateJSON":"{}","version":1,"visState":"{\"aggs\":[],\"params\":{\"spec\":\"{\\r\\n  $schema: https://vega.github.io/schema/vega/v3.0.json\\r\\n  data: [\\r\\n    {\\r\\n      // query ES based on the currently selected time range and filter string\\r\\n      name: rawData\\r\\n      url: {\\r\\n        %context%: true\\r\\n        %timefield%: @timestamp\\r\\n        index: http.logs-*\\r\\n        body: {\\r\\n          size: 0\\r\\n          aggs: {\\r\\n            table: {\\r\\n              composite: {\\r\\n                size: 10000\\r\\n                sources: [\\r\\n                  {\\r\\n                    stk1: {\\r\\n                      terms: {field: \\\"xff_ip.keyword\\\"}\\r\\n                    }\\r\\n                  }\\r\\n                  {\\r\\n                    stk2: {\\r\\n                      terms: {field: \\\"deviceB.keyword\\\"}\\r\\n                    }\\r\\n                  }\\r\\n                ]\\r\\n              }\\r\\n            }\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n      // From the result, take just the data we are interested in\\r\\n      format: {property: \\\"aggregations.table.buckets\\\"}\\r\\n      // Convert key.stk1 -> stk1 for simpler access below\\r\\n      transform: [\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.key.stk1\\\", as: \\\"stk1\\\"}\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.key.stk2\\\", as: \\\"stk2\\\"}\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.doc_count\\\", as: \\\"size\\\"}\\r\\n      ]\\r\\n    }\\r\\n    {\\r\\n      name: nodes\\r\\n      source: rawData\\r\\n      transform: [\\r\\n        // when a country is selected, filter out unrelated data\\r\\n        {\\r\\n          type: filter\\r\\n          expr: !groupSelector || groupSelector.stk1 == datum.stk1 || groupSelector.stk2 == datum.stk2\\r\\n        }\\r\\n        // Set new key for later lookups - identifies each node\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.stk1+datum.stk2\\\", as: \\\"key\\\"}\\r\\n        // instead of each table row, create two new rows,\\r\\n        // one for the source (stack=stk1) and one for destination node (stack=stk2).\\r\\n        // The country code stored in stk1 and stk2 fields is placed into grpId field.\\r\\n        {\\r\\n          type: fold\\r\\n          fields: [\\\"stk1\\\", \\\"stk2\\\"]\\r\\n          as: [\\\"stack\\\", \\\"grpId\\\"]\\r\\n        }\\r\\n        // Create a sortkey, different for stk1 and stk2 stacks.\\r\\n        // Space separator ensures proper sort order in some corner cases.\\r\\n        {\\r\\n          type: formula\\r\\n          expr: datum.stack == 'stk1' ? datum.stk1+' '+datum.stk2 : datum.stk2+' '+datum.stk1\\r\\n          as: sortField\\r\\n        }\\r\\n        // Calculate y0 and y1 positions for stacking nodes one on top of the other,\\r\\n        // independently for each stack, and ensuring they are in the proper order,\\r\\n        // alphabetical from the top (reversed on the y axis)\\r\\n        {\\r\\n          type: stack\\r\\n          groupby: [\\\"stack\\\"]\\r\\n          sort: {field: \\\"sortField\\\", order: \\\"descending\\\"}\\r\\n          field: size\\r\\n        }\\r\\n        // calculate vertical center point for each node, used to draw edges\\r\\n        {type: \\\"formula\\\", expr: \\\"(datum.y0+datum.y1)/2\\\", as: \\\"yc\\\"}\\r\\n      ]\\r\\n    }\\r\\n    {\\r\\n      name: groups\\r\\n      source: nodes\\r\\n      transform: [\\r\\n        // combine all nodes into country groups, summing up the doc counts\\r\\n        {\\r\\n          type: aggregate\\r\\n          groupby: [\\\"stack\\\", \\\"grpId\\\"]\\r\\n          fields: [\\\"size\\\"]\\r\\n          ops: [\\\"sum\\\"]\\r\\n          as: [\\\"total\\\"]\\r\\n        }\\r\\n        // re-calculate the stacking y0,y1 values\\r\\n        {\\r\\n          type: stack\\r\\n          groupby: [\\\"stack\\\"]\\r\\n          sort: {field: \\\"grpId\\\", order: \\\"descending\\\"}\\r\\n          field: total\\r\\n        }\\r\\n        // project y0 and y1 values to screen coordinates\\r\\n        // doing it once here instead of doing it several times in marks\\r\\n        {type: \\\"formula\\\", expr: \\\"scale('y', datum.y0)\\\", as: \\\"scaledY0\\\"}\\r\\n        {type: \\\"formula\\\", expr: \\\"scale('y', datum.y1)\\\", as: \\\"scaledY1\\\"}\\r\\n        // boolean flag if the label should be on the right of the stack\\r\\n        {type: \\\"formula\\\", expr: \\\"datum.stack == 'stk1'\\\", as: \\\"rightLabel\\\"}\\r\\n        // Calculate traffic percentage for this country using \\\"y\\\" scale\\r\\n        // domain upper bound, which represents the total traffic\\r\\n        {\\r\\n          type: formula\\r\\n          expr: datum.total/domain('y')[1]\\r\\n          as: percentage\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n    {\\r\\n      // This is a temp lookup table with all the 'stk2' stack nodes\\r\\n      name: destinationNodes\\r\\n      source: nodes\\r\\n      transform: [\\r\\n        {type: \\\"filter\\\", expr: \\\"datum.stack == 'stk2'\\\"}\\r\\n      ]\\r\\n    }\\r\\n    {\\r\\n      name: edges\\r\\n      source: nodes\\r\\n      transform: [\\r\\n        // we only want nodes from the left stack\\r\\n        {type: \\\"filter\\\", expr: \\\"datum.stack == 'stk1'\\\"}\\r\\n        // find corresponding node from the right stack, keep it as \\\"target\\\"\\r\\n        {\\r\\n          type: lookup\\r\\n          from: destinationNodes\\r\\n          key: key\\r\\n          fields: [\\\"key\\\"]\\r\\n          as: [\\\"target\\\"]\\r\\n        }\\r\\n        // calculate SVG link path between stk1 and stk2 stacks for the node pair\\r\\n        {\\r\\n          type: linkpath\\r\\n          orient: horizontal\\r\\n          shape: diagonal\\r\\n          sourceY: {expr: \\\"scale('y', datum.yc)\\\"}\\r\\n          sourceX: {expr: \\\"scale('x', 'stk1') + bandwidth('x')\\\"}\\r\\n          targetY: {expr: \\\"scale('y', datum.target.yc)\\\"}\\r\\n          targetX: {expr: \\\"scale('x', 'stk2')\\\"}\\r\\n        }\\r\\n        // A little trick to calculate the thickness of the line.\\r\\n        // The value needs to be the same as the hight of the node, but scaling\\r\\n        // size to screen's height gives inversed value because screen's Y\\r\\n        // coordinate goes from the top to the bottom, whereas the graph's Y=0\\r\\n        // is at the bottom. So subtracting scaled doc count from screen height\\r\\n        // (which is the \\\"lower\\\" bound of the \\\"y\\\" scale) gives us the right value\\r\\n        {\\r\\n          type: formula\\r\\n          expr: range('y')[0]-scale('y', datum.size)\\r\\n          as: strokeWidth\\r\\n        }\\r\\n        // Tooltip needs individual link's percentage of all traffic\\r\\n        {\\r\\n          type: formula\\r\\n          expr: datum.size/domain('y')[1]\\r\\n          as: percentage\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ]\\r\\n  scales: [\\r\\n    {\\r\\n      // calculates horizontal stack positioning\\r\\n      name: x\\r\\n      type: band\\r\\n      range: width\\r\\n      domain: [\\\"stk1\\\", \\\"stk2\\\"]\\r\\n      paddingOuter: 0.05\\r\\n      paddingInner: 0.95\\r\\n    }\\r\\n    {\\r\\n      // this scale goes up as high as the highest y1 value of all nodes\\r\\n      name: y\\r\\n      type: linear\\r\\n      range: height\\r\\n      domain: {data: \\\"nodes\\\", field: \\\"y1\\\"}\\r\\n    }\\r\\n    {\\r\\n      // use rawData to ensure the colors stay the same when clicking.\\r\\n      name: color\\r\\n      type: ordinal\\r\\n      range: category\\r\\n      domain: {data: \\\"rawData\\\", fields: [\\\"stk1\\\", \\\"stk2\\\"]}\\r\\n    }\\r\\n    {\\r\\n      // this scale is used to map internal ids (stk1, stk2) to stack names\\r\\n      name: stackNames\\r\\n      type: ordinal\\r\\n      range: [\\\"Source\\\", \\\"Destination\\\"]\\r\\n      domain: [\\\"stk1\\\", \\\"stk2\\\"]\\r\\n    }\\r\\n  ]\\r\\n  axes: [\\r\\n    {\\r\\n      // x axis should use custom label formatting to print proper stack names\\r\\n      orient: bottom\\r\\n      scale: x\\r\\n      encode: {\\r\\n        labels: {\\r\\n          update: {\\r\\n            text: {scale: \\\"stackNames\\\", field: \\\"value\\\"}\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n    {orient: \\\"left\\\", scale: \\\"y\\\"}\\r\\n  ]\\r\\n  marks: [\\r\\n    {\\r\\n      // draw the connecting line between stacks\\r\\n      type: path\\r\\n      name: edgeMark\\r\\n      from: {data: \\\"edges\\\"}\\r\\n      // this prevents some autosizing issues with large strokeWidth for paths\\r\\n      clip: true\\r\\n      encode: {\\r\\n        update: {\\r\\n          // By default use color of the left node, except when showing traffic\\r\\n          // from just one country, in which case use destination color.\\r\\n          stroke: [\\r\\n            {\\r\\n              test: groupSelector && groupSelector.stack=='stk1'\\r\\n              scale: color\\r\\n              field: stk2\\r\\n            }\\r\\n            {scale: \\\"color\\\", field: \\\"stk1\\\"}\\r\\n          ]\\r\\n          strokeWidth: {field: \\\"strokeWidth\\\"}\\r\\n          path: {field: \\\"path\\\"}\\r\\n          // when showing all traffic, and hovering over a country,\\r\\n          // highlight the traffic from that country.\\r\\n          strokeOpacity: {\\r\\n            signal: !groupSelector && (groupHover.stk1 == datum.stk1 || groupHover.stk2 == datum.stk2) ? 0.9 : 0.3\\r\\n          }\\r\\n          // Ensure that the hover-selected edges show on top\\r\\n          zindex: {\\r\\n            signal: !groupSelector && (groupHover.stk1 == datum.stk1 || groupHover.stk2 == datum.stk2) ? 1 : 0\\r\\n          }\\r\\n          // format tooltip string\\r\\n          tooltip: {\\r\\n            signal: datum.stk1 + ' → ' + datum.stk2 + '    ' + format(datum.size, ',.0f') + '   (' + format(datum.percentage, '.1%') + ')'\\r\\n          }\\r\\n        }\\r\\n        // Simple mouseover highlighting of a single line\\r\\n        hover: {\\r\\n          strokeOpacity: {value: 1}\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n    {\\r\\n      // draw stack groups (countries)\\r\\n      type: rect\\r\\n      name: groupMark\\r\\n      from: {data: \\\"groups\\\"}\\r\\n      encode: {\\r\\n        enter: {\\r\\n          fill: {scale: \\\"color\\\", field: \\\"grpId\\\"}\\r\\n          width: {scale: \\\"x\\\", band: 1}\\r\\n        }\\r\\n        update: {\\r\\n          x: {scale: \\\"x\\\", field: \\\"stack\\\"}\\r\\n          y: {field: \\\"scaledY0\\\"}\\r\\n          y2: {field: \\\"scaledY1\\\"}\\r\\n          fillOpacity: {value: 0.6}\\r\\n          tooltip: {\\r\\n            signal: datum.grpId + '   ' + format(datum.total, ',.0f') + '   (' + format(datum.percentage, '.1%') + ')'\\r\\n          }\\r\\n        }\\r\\n        hover: {\\r\\n          fillOpacity: {value: 1}\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n    {\\r\\n      // draw country code labels on the inner side of the stack\\r\\n      type: text\\r\\n      from: {data: \\\"groups\\\"}\\r\\n      // don't process events for the labels - otherwise line mouseover is unclean\\r\\n      interactive: false\\r\\n      encode: {\\r\\n        update: {\\r\\n          // depending on which stack it is, position x with some padding\\r\\n          x: {\\r\\n            signal: scale('x', datum.stack) + (datum.rightLabel ? bandwidth('x') + 8 : -8)\\r\\n          }\\r\\n          // middle of the group\\r\\n          yc: {signal: \\\"(datum.scaledY0 + datum.scaledY1)/2\\\"}\\r\\n          align: {signal: \\\"datum.rightLabel ? 'left' : 'right'\\\"}\\r\\n          baseline: {value: \\\"middle\\\"}\\r\\n          fontWeight: {value: \\\"bold\\\"}\\r\\n          // only show text label if the group's height is large enough\\r\\n          text: {signal: \\\"abs(datum.scaledY0-datum.scaledY1) > 13 ? datum.grpId : ''\\\"}\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n    {\\r\\n      // Create a \\\"show all\\\" button. Shown only when a country is selected.\\r\\n      type: group\\r\\n      data: [\\r\\n        // We need to make the button show only when groupSelector signal is true.\\r\\n        // Each mark is drawn as many times as there are elements in the backing data.\\r\\n        // Which means that if values list is empty, it will not be drawn.\\r\\n        // Here I create a data source with one empty object, and filter that list\\r\\n        // based on the signal value. This can only be done in a group.\\r\\n        {\\r\\n          name: dataForShowAll\\r\\n          values: [{}]\\r\\n          transform: [{type: \\\"filter\\\", expr: \\\"groupSelector\\\"}]\\r\\n        }\\r\\n      ]\\r\\n      // Set button size and positioning\\r\\n      encode: {\\r\\n        enter: {\\r\\n          xc: {signal: \\\"width/2\\\"}\\r\\n          y: {value: 30}\\r\\n          width: {value: 80}\\r\\n          height: {value: 30}\\r\\n        }\\r\\n      }\\r\\n      marks: [\\r\\n        {\\r\\n          // This group is shown as a button with rounded corners.\\r\\n          type: group\\r\\n          // mark name allows signal capturing\\r\\n          name: groupReset\\r\\n          // Only shows button if dataForShowAll has values.\\r\\n          from: {data: \\\"dataForShowAll\\\"}\\r\\n          encode: {\\r\\n            enter: {\\r\\n              cornerRadius: {value: 6}\\r\\n              fill: {value: \\\"#f5f5f5\\\"}\\r\\n              stroke: {value: \\\"#c1c1c1\\\"}\\r\\n              strokeWidth: {value: 2}\\r\\n              // use parent group's size\\r\\n              height: {\\r\\n                field: {group: \\\"height\\\"}\\r\\n              }\\r\\n              width: {\\r\\n                field: {group: \\\"width\\\"}\\r\\n              }\\r\\n            }\\r\\n            update: {\\r\\n              // groups are transparent by default\\r\\n              opacity: {value: 1}\\r\\n            }\\r\\n            hover: {\\r\\n              opacity: {value: 0.7}\\r\\n            }\\r\\n          }\\r\\n          marks: [\\r\\n            {\\r\\n              type: text\\r\\n              // if true, it will prevent clicking on the button when over text.\\r\\n              interactive: false\\r\\n              encode: {\\r\\n                enter: {\\r\\n                  // center text in the paren group\\r\\n                  xc: {\\r\\n                    field: {group: \\\"width\\\"}\\r\\n                    mult: 0.5\\r\\n                  }\\r\\n                  yc: {\\r\\n                    field: {group: \\\"height\\\"}\\r\\n                    mult: 0.5\\r\\n                    offset: 2\\r\\n                  }\\r\\n                  align: {value: \\\"center\\\"}\\r\\n                  baseline: {value: \\\"middle\\\"}\\r\\n                  fontWeight: {value: \\\"bold\\\"}\\r\\n                  text: {value: \\\"Show All\\\"}\\r\\n                }\\r\\n              }\\r\\n            }\\r\\n          ]\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ]\\r\\n  signals: [\\r\\n    {\\r\\n      // used to highlight traffic to/from the same country\\r\\n      name: groupHover\\r\\n      value: {}\\r\\n      on: [\\r\\n        {\\r\\n          events: @groupMark:mouseover\\r\\n          update: \\\"{stk1:datum.stack=='stk1' && datum.grpId, stk2:datum.stack=='stk2' && datum.grpId}\\\"\\r\\n        }\\r\\n        {events: \\\"mouseout\\\", update: \\\"{}\\\"}\\r\\n      ]\\r\\n    }\\r\\n    // used to filter only the data related to the selected country\\r\\n    {\\r\\n      name: groupSelector\\r\\n      value: false\\r\\n      on: [\\r\\n        {\\r\\n          // Clicking groupMark sets this signal to the filter values\\r\\n          events: @groupMark:click!\\r\\n          update: \\\"{stack:datum.stack, stk1:datum.stack=='stk1' && datum.grpId, stk2:datum.stack=='stk2' && datum.grpId}\\\"\\r\\n        }\\r\\n        {\\r\\n          // Clicking \\\"show all\\\" button, or double-clicking anywhere resets it\\r\\n          events: [\\r\\n            {type: \\\"click\\\", markname: \\\"groupReset\\\"}\\r\\n            {type: \\\"dblclick\\\"}\\r\\n          ]\\r\\n          update: \\\"false\\\"\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ]\\r\\n}\"},\"title\":\"Vega - Geo IP to Device ID Type B\",\"type\":\"vega\"}"},"coreMigrationVersion":"7.13.2","id":"16f41c20-9239-11eb-a310-d38178f3b2d9","migrationVersion":{"visualization":"7.13.1"},"references":[],"type":"visualization","updated_at":"2021-07-28T07:46:44.722Z","version":"WzM2OCwxXQ=="}
{"attributes":{"description":"","hits":0,"kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"optionsJSON":"{\"hidePanelTitles\":false,\"useMargins\":true}","panelsJSON":"[{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":0,\"w\":12,\"h\":15,\"i\":\"8174cd17-2ef8-4536-9196-cc334667c13b\"},\"panelIndex\":\"8174cd17-2ef8-4536-9196-cc334667c13b\",\"embeddableConfig\":{\"enhancements\":{},\"vis\":{\"params\":{\"colWidth\":[{\"colIndex\":0,\"width\":370}]}}},\"panelRefName\":\"panel_8174cd17-2ef8-4536-9196-cc334667c13b\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":12,\"y\":0,\"w\":12,\"h\":15,\"i\":\"a15c7a20-9a3c-4755-8408-3744caf5af13\"},\"panelIndex\":\"a15c7a20-9a3c-4755-8408-3744caf5af13\",\"embeddableConfig\":{\"enhancements\":{},\"vis\":{\"params\":{\"colWidth\":[{\"colIndex\":0,\"width\":346}]}}},\"panelRefName\":\"panel_a15c7a20-9a3c-4755-8408-3744caf5af13\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":24,\"y\":0,\"w\":8,\"h\":15,\"i\":\"ba7769b9-bd0f-49c4-9978-0efbbf68f246\"},\"panelIndex\":\"ba7769b9-bd0f-49c4-9978-0efbbf68f246\",\"embeddableConfig\":{\"enhancements\":{},\"vis\":{\"params\":{\"colWidth\":[{\"colIndex\":0,\"width\":185.5}]}},\"table\":null},\"panelRefName\":\"panel_ba7769b9-bd0f-49c4-9978-0efbbf68f246\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":32,\"y\":0,\"w\":9,\"h\":15,\"i\":\"edffc876-e025-4b19-97b5-bb54264d2aa3\"},\"panelIndex\":\"edffc876-e025-4b19-97b5-bb54264d2aa3\",\"embeddableConfig\":{\"enhancements\":{},\"vis\":{\"params\":{\"colWidth\":[{\"colIndex\":0,\"width\":193}]}}},\"panelRefName\":\"panel_edffc876-e025-4b19-97b5-bb54264d2aa3\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":41,\"y\":0,\"w\":7,\"h\":15,\"i\":\"f8e2462b-2ef6-4a01-8e97-71dd14106e75\"},\"panelIndex\":\"f8e2462b-2ef6-4a01-8e97-71dd14106e75\",\"embeddableConfig\":{\"vis\":{\"params\":{\"colWidth\":[{\"colIndex\":0,\"width\":174.5}]}},\"enhancements\":{}},\"panelRefName\":\"panel_f8e2462b-2ef6-4a01-8e97-71dd14106e75\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":15,\"w\":23,\"h\":9,\"i\":\"bca5a159-7e77-493b-a10a-5d9f53d153bb\"},\"panelIndex\":\"bca5a159-7e77-493b-a10a-5d9f53d153bb\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_bca5a159-7e77-493b-a10a-5d9f53d153bb\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":23,\"y\":15,\"w\":25,\"h\":9,\"i\":\"a7ec2fa2-f008-47fb-a832-036fc397c385\"},\"panelIndex\":\"a7ec2fa2-f008-47fb-a832-036fc397c385\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_a7ec2fa2-f008-47fb-a832-036fc397c385\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":24,\"w\":23,\"h\":9,\"i\":\"674e6629-d76d-4fa7-8b6c-166a2c269bc3\"},\"panelIndex\":\"674e6629-d76d-4fa7-8b6c-166a2c269bc3\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_674e6629-d76d-4fa7-8b6c-166a2c269bc3\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":23,\"y\":24,\"w\":25,\"h\":9,\"i\":\"3ef14329-7fed-416c-9f58-e8424bfa0dca\"},\"panelIndex\":\"3ef14329-7fed-416c-9f58-e8424bfa0dca\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_3ef14329-7fed-416c-9f58-e8424bfa0dca\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":33,\"w\":24,\"h\":15,\"i\":\"ea359190-93b5-4ad9-8e31-6bd929300ae0\"},\"panelIndex\":\"ea359190-93b5-4ad9-8e31-6bd929300ae0\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_ea359190-93b5-4ad9-8e31-6bd929300ae0\"},{\"version\":\"7.13.2\",\"type\":\"visualization\",\"gridData\":{\"x\":24,\"y\":33,\"w\":24,\"h\":15,\"i\":\"3c94c643-34e7-4ee1-aa4a-1fd181f6279e\"},\"panelIndex\":\"3c94c643-34e7-4ee1-aa4a-1fd181f6279e\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_3c94c643-34e7-4ee1-aa4a-1fd181f6279e\"},{\"version\":\"7.13.2\",\"type\":\"lens\",\"gridData\":{\"x\":0,\"y\":48,\"w\":24,\"h\":15,\"i\":\"b6a5e1e1-92d3-4dce-9b82-f9d5a9b616d0\"},\"panelIndex\":\"b6a5e1e1-92d3-4dce-9b82-f9d5a9b616d0\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_b6a5e1e1-92d3-4dce-9b82-f9d5a9b616d0\"},{\"version\":\"7.13.2\",\"type\":\"lens\",\"gridData\":{\"x\":24,\"y\":48,\"w\":24,\"h\":15,\"i\":\"dfb53673-96ce-4eb9-833f-d5ad4e1a60c8\"},\"panelIndex\":\"dfb53673-96ce-4eb9-833f-d5ad4e1a60c8\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_dfb53673-96ce-4eb9-833f-d5ad4e1a60c8\"},{\"version\":\"7.13.2\",\"type\":\"lens\",\"gridData\":{\"x\":0,\"y\":63,\"w\":24,\"h\":15,\"i\":\"e6240652-b041-4971-83fe-dffcb647d31a\"},\"panelIndex\":\"e6240652-b041-4971-83fe-dffcb647d31a\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_e6240652-b041-4971-83fe-dffcb647d31a\"},{\"version\":\"7.13.2\",\"type\":\"lens\",\"gridData\":{\"x\":24,\"y\":63,\"w\":24,\"h\":15,\"i\":\"2e5ed21b-2187-4633-b3ef-de7f1ceef131\"},\"panelIndex\":\"2e5ed21b-2187-4633-b3ef-de7f1ceef131\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_2e5ed21b-2187-4633-b3ef-de7f1ceef131\"},{\"version\":\"7.13.2\",\"type\":\"lens\",\"gridData\":{\"x\":0,\"y\":78,\"w\":24,\"h\":15,\"i\":\"0c62f0f8-1e03-402d-980d-2d0e2433604e\"},\"panelIndex\":\"0c62f0f8-1e03-402d-980d-2d0e2433604e\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_0c62f0f8-1e03-402d-980d-2d0e2433604e\"},{\"version\":\"7.13.2\",\"type\":\"lens\",\"gridData\":{\"x\":24,\"y\":78,\"w\":24,\"h\":15,\"i\":\"6ebeda0d-4087-40dd-ad9d-c75ca0649ce7\"},\"panelIndex\":\"6ebeda0d-4087-40dd-ad9d-c75ca0649ce7\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_6ebeda0d-4087-40dd-ad9d-c75ca0649ce7\"},{\"version\":\"7.13.2\",\"type\":\"lens\",\"gridData\":{\"x\":0,\"y\":93,\"w\":24,\"h\":15,\"i\":\"57964995-6c34-4eb6-9816-51d428a88aac\"},\"panelIndex\":\"57964995-6c34-4eb6-9816-51d428a88aac\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_57964995-6c34-4eb6-9816-51d428a88aac\"},{\"version\":\"7.13.2\",\"type\":\"lens\",\"gridData\":{\"x\":24,\"y\":93,\"w\":24,\"h\":15,\"i\":\"2d5a419f-3cec-407e-b6f5-9499a0e7995d\"},\"panelIndex\":\"2d5a419f-3cec-407e-b6f5-9499a0e7995d\",\"embeddableConfig\":{\"enhancements\":{}},\"panelRefName\":\"panel_2d5a419f-3cec-407e-b6f5-9499a0e7995d\"}]","timeRestore":false,"title":"Dashboard","version":1},"coreMigrationVersion":"7.13.2","id":"8bfabf30-8d78-11eb-81c6-b34d3b3b9c76","migrationVersion":{"dashboard":"7.13.1"},"references":[{"id":"8b89f1f0-ae67-11eb-a780-3d1ba04a766c","name":"8174cd17-2ef8-4536-9196-cc334667c13b:panel_8174cd17-2ef8-4536-9196-cc334667c13b","type":"visualization"},{"id":"958c0c60-ae67-11eb-a780-3d1ba04a766c","name":"a15c7a20-9a3c-4755-8408-3744caf5af13:panel_a15c7a20-9a3c-4755-8408-3744caf5af13","type":"visualization"},{"id":"aba45430-ae67-11eb-a780-3d1ba04a766c","name":"ba7769b9-bd0f-49c4-9978-0efbbf68f246:panel_ba7769b9-bd0f-49c4-9978-0efbbf68f246","type":"visualization"},{"id":"72075600-ae67-11eb-a780-3d1ba04a766c","name":"edffc876-e025-4b19-97b5-bb54264d2aa3:panel_edffc876-e025-4b19-97b5-bb54264d2aa3","type":"visualization"},{"id":"c7584e10-ae72-11eb-a780-3d1ba04a766c","name":"f8e2462b-2ef6-4a01-8e97-71dd14106e75:panel_f8e2462b-2ef6-4a01-8e97-71dd14106e75","type":"visualization"},{"id":"fdd7bfa0-8da4-11eb-9a2b-7de272420af0","name":"bca5a159-7e77-493b-a10a-5d9f53d153bb:panel_bca5a159-7e77-493b-a10a-5d9f53d153bb","type":"visualization"},{"id":"51ce3620-ad80-11eb-907b-79e0f2e5ce74","name":"a7ec2fa2-f008-47fb-a832-036fc397c385:panel_a7ec2fa2-f008-47fb-a832-036fc397c385","type":"visualization"},{"id":"1234c2e0-8da5-11eb-9a2b-7de272420af0","name":"674e6629-d76d-4fa7-8b6c-166a2c269bc3:panel_674e6629-d76d-4fa7-8b6c-166a2c269bc3","type":"visualization"},{"id":"6dd11450-ad80-11eb-907b-79e0f2e5ce74","name":"3ef14329-7fed-416c-9f58-e8424bfa0dca:panel_3ef14329-7fed-416c-9f58-e8424bfa0dca","type":"visualization"},{"id":"3dccdf80-9239-11eb-a310-d38178f3b2d9","name":"ea359190-93b5-4ad9-8e31-6bd929300ae0:panel_ea359190-93b5-4ad9-8e31-6bd929300ae0","type":"visualization"},{"id":"16f41c20-9239-11eb-a310-d38178f3b2d9","name":"3c94c643-34e7-4ee1-aa4a-1fd181f6279e:panel_3c94c643-34e7-4ee1-aa4a-1fd181f6279e","type":"visualization"},{"id":"8ad67230-8d72-11eb-81c6-b34d3b3b9c76","name":"b6a5e1e1-92d3-4dce-9b82-f9d5a9b616d0:panel_b6a5e1e1-92d3-4dce-9b82-f9d5a9b616d0","type":"lens"},{"id":"11838700-8d73-11eb-81c6-b34d3b3b9c76","name":"dfb53673-96ce-4eb9-833f-d5ad4e1a60c8:panel_dfb53673-96ce-4eb9-833f-d5ad4e1a60c8","type":"lens"},{"id":"83dbd5f0-8d73-11eb-81c6-b34d3b3b9c76","name":"e6240652-b041-4971-83fe-dffcb647d31a:panel_e6240652-b041-4971-83fe-dffcb647d31a","type":"lens"},{"id":"9f70d720-8d73-11eb-81c6-b34d3b3b9c76","name":"2e5ed21b-2187-4633-b3ef-de7f1ceef131:panel_2e5ed21b-2187-4633-b3ef-de7f1ceef131","type":"lens"},{"id":"0269c050-8da4-11eb-9a2b-7de272420af0","name":"0c62f0f8-1e03-402d-980d-2d0e2433604e:panel_0c62f0f8-1e03-402d-980d-2d0e2433604e","type":"lens"},{"id":"ae7dae70-8da3-11eb-9a2b-7de272420af0","name":"6ebeda0d-4087-40dd-ad9d-c75ca0649ce7:panel_6ebeda0d-4087-40dd-ad9d-c75ca0649ce7","type":"lens"},{"id":"d4bde740-92c5-11eb-b296-0f227a1b9529","name":"57964995-6c34-4eb6-9816-51d428a88aac:panel_57964995-6c34-4eb6-9816-51d428a88aac","type":"lens"},{"id":"e339f110-92c5-11eb-b296-0f227a1b9529","name":"2d5a419f-3cec-407e-b6f5-9499a0e7995d:panel_2d5a419f-3cec-407e-b6f5-9499a0e7995d","type":"lens"}],"type":"dashboard","updated_at":"2021-07-28T09:04:23.807Z","version":"WzEwMjAsMV0="}
{"exportedCount":31,"missingRefCount":0,"missingReferences":[]}